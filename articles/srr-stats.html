<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Preparing Statistical Software with the srr package • srr</title>
<!-- rOpenSci favicons --><link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
<link rel="apple-touch-icon" type="image/png" sizes="180x180" href="/apple-touch-icon.png">
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Preparing Statistical Software with the srr package">
<link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.css">
<script src="https://cdn.jsdelivr.net/gh/orestbida/cookieconsent@v3.0.0/dist/cookieconsent.umd.js" data-cfasync="false"></script><script src="https://ropensci.org/scripts/matomo.js"></script><noscript><p><img src="https://ropensci.matomo.cloud/matomo.php?idsite=1&amp;rec=1" style="border:0;" alt=""></p></noscript>
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">
    <a href="https://ropensci.org" class="external-link"><img src="https://ropensci.org/img/icon_short_white.svg" id="hexlogo" alt="rOpenSci"></a>
    <a class="navbar-brand me-2" href="../index.html">srr</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="Released version">0.1.3.020</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"></ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/srr-stats.html">Preparing Statistical Software with the srr package</a></li>
  </ul>
</li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/ropensci-review-tools/srr/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Preparing Statistical Software with the srr package</h1>
                        <h4 data-toc-skip class="author">Mark
Padgham</h4>
            
            <h4 data-toc-skip class="date">2024-10-23</h4>
      
      <small class="dont-index">Source: <a href="https://github.com/ropensci-review-tools/srr/blob/master/vignettes/srr-stats.Rmd" class="external-link"><code>vignettes/srr-stats.Rmd</code></a></small>
      <div class="d-none name"><code>srr-stats.Rmd</code></div>
    </div>

    
    
<p><code>srr</code> stands for <strong>S</strong>oftware
<strong>R</strong>eview <strong>R</strong>oclets, and is an R package
containing roclets for general use in helping those developing and
reviewing packages submitted to rOpenSci. At present, the
<code>srr</code> package only contains roclets and associated functions
to help those developing and reviewing packages submitted to rOpenSci’s
system for <a href="https://stats-devguide.ropensci.org/" class="external-link">Statistical
Software Review</a>. This vignette demonstrates how developers are
intended to use this package to document the alignment of their software
with rOpenSci’s <a href="https://stats-devguide.ropensci.org/standards.html" class="external-link">standards for
statistical software</a>.</p>
<p>The main functions of the package are constructed as <a href="https://roxygen2.r-lib.org" class="external-link"><code>roxygen2</code> “roclets”</a>,
meaning that these functions are called each time package documentation
is updated by calling <a href="https://devtools.r-lib.org/reference/document.html" class="external-link"><code>devtools::document()</code></a>
or equivalently <a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link"><code>roxygen2::roxygenise()</code></a>.
The former is just a wrapper around the latter, to enable documentation
to updated by a single call from within the <a href="https://devtools.r-lib.org" class="external-link"><code>devtools</code> package</a>.
From here on, this stage of updating documentation and triggering the
<code>srr</code> roclets will be referred to as “running <a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link"><code>roxygenise</code></a>.”</p>
<div class="section level2">
<h2 id="the-package-skeleton">1. The package skeleton<a class="anchor" aria-label="anchor" href="#the-package-skeleton"></a>
</h2>
<p>The <a href="https://docs.ropensci.org/srr/reference/srr_stats_pkg_skeleton.html"><code>srr_stats_pkg_skeleton()</code>
function</a> included with this package differs from <a href="https://stat.ethz.ch/R-manual/R-patched/library/utils/html/package.skeleton.html" class="external-link">other</a>
<a href="https://usethis.r-lib.org/reference/create_package.html" class="external-link">package</a>
<a href="https://rdrr.io/cran/Rcpp/man/Rcpp.package.skeleton.html" class="external-link">skeleton</a>
functions. Rather than providing a skeleton from which you can construct
your own package, the <a href="https://docs.ropensci.org/srr/reference/srr_stats_pkg_skeleton.html"><code>srr_stats_pkg_skeleton()</code>
function</a> generates a skeleton to help developers understand this
package works. This skeleton of a package is intended to be modified to
help you understand which kinds of modifications are allowed, and which
generate errors. The package is by default called <code>"demo"</code>,
is constructed in R’s <a href="https://stat.ethz.ch/R-manual/R-devel/library/base/html/tempfile.html" class="external-link"><code>tempdir()</code></a>,
and looks like this:</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span> <span class="op">(</span><span class="va"><a href="https://docs.ropensci.org/srr/">srr</a></span><span class="op">)</span></span>
<span><span class="va">d</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/srr_stats_pkg_skeleton.html">srr_stats_pkg_skeleton</a></span> <span class="op">(</span>pkg_name <span class="op">=</span> <span class="st">"package"</span><span class="op">)</span></span>
<span><span class="fu">fs</span><span class="fu">::</span><span class="fu"><a href="https://fs.r-lib.org/reference/dir_tree.html" class="external-link">dir_tree</a></span> <span class="op">(</span><span class="va">d</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #0000BB; font-weight: bold;">/tmp/RtmpjDNY44/package</span></span></span>
<span><span class="co">## ├── DESCRIPTION</span></span>
<span><span class="co">## ├── NAMESPACE</span></span>
<span><span class="co">## ├── <span style="color: #0000BB; font-weight: bold;">R</span></span></span>
<span><span class="co">## │   ├── <span style="color: #00BB00;">RcppExports.R</span></span></span>
<span><span class="co">## │   ├── <span style="color: #00BB00;">package-package.R</span></span></span>
<span><span class="co">## │   ├── <span style="color: #00BB00;">srr-stats-standards.R</span></span></span>
<span><span class="co">## │   └── <span style="color: #00BB00;">test.R</span></span></span>
<span><span class="co">## ├── <span style="color: #00BB00;">README.Rmd</span></span></span>
<span><span class="co">## ├── <span style="color: #0000BB; font-weight: bold;">src</span></span></span>
<span><span class="co">## │   ├── RcppExports.cpp</span></span>
<span><span class="co">## │   └── cpptest.cpp</span></span>
<span><span class="co">## └── <span style="color: #0000BB; font-weight: bold;">tests</span></span></span>
<span><span class="co">##     ├── <span style="color: #0000BB; font-weight: bold;">testthat</span></span></span>
<span><span class="co">##     │   └── <span style="color: #00BB00;">test-a.R</span></span></span>
<span><span class="co">##     └── <span style="color: #00BB00;">testthat.R</span></span></span></code></pre>
<p>The files listed there mostly exist to illustrate how standards can
be included within code. The format of standards can be seen by
examining any of those files. For example, the <code>test.R</code> file
looks like this:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span> <span class="op">(</span><span class="va">d</span>, <span class="st">"R"</span>, <span class="st">"test.R"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "#' test_fn"                                                </span></span>
<span><span class="co">##  [2] "#'"                                                        </span></span>
<span><span class="co">##  [3] "#' A test funtion"                                         </span></span>
<span><span class="co">##  [4] "#'"                                                        </span></span>
<span><span class="co">##  [5] "#' @srrstats {G1.1, G1.2, G1.3} with some text"            </span></span>
<span><span class="co">##  [6] "#' @srrstats Text can appear before standards {G2.0, G2.1}"</span></span>
<span><span class="co">##  [7] "#' @srrstatsTODO {RE1.1} standards which are still to be"  </span></span>
<span><span class="co">##  [8] "#' addressed are tagged 'srrstatsTODO'"                    </span></span>
<span><span class="co">##  [9] "#'"                                                        </span></span>
<span><span class="co">## [10] "#' @export"                                                </span></span>
<span><span class="co">## [11] "test_fn &lt;- function() {"                                   </span></span>
<span><span class="co">## [12] "  message(\"This function does nothing\")"                 </span></span>
<span><span class="co">## [13] "}"</span></span></code></pre>
<p>That file illustrates some of the <a href="https://roxygen2.r-lib.org" class="external-link"><code>roxygen2</code></a> tags defined
by this package, and described in detail below. These tags are parsed
whenever package documentation is updated with <a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link"><code>roxygenise()</code></a>,
which will produce output like the following:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">roxygen2</span><span class="fu">::</span><span class="fu"><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygenise</a></span> <span class="op">(</span><span class="va">d</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## Setting `RoxygenNote` to "7.3.2"</span></span>
<span><span class="co">## Writing <span style="color: #0000BB;">NAMESPACE</span></span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Loading <span style="color: #0000BB;">package</span></span></span>
<span><span class="co">## <span style="color: #00BB00;">────────────────────</span> <span style="color: #00BB00;">rOpenSci Statistical Software Standards</span> <span style="color: #00BB00;">───────────────────</span></span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ── @srrstats standards (6 / 9): </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   * [G1.1, G1.2, G1.3, G2.0, G2.1] in function 'test_fn()' on line#11 of file [R/test.R]</span></span>
<span><span class="co">##   * [G2.3] in function 'test()' on line#6 of file [src/cpptest.cpp]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ── @srrstatsNA standards (1 / 9): </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   * [RE3.3] on line#5 of file [R/srr-stats-standards.R]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## </span></span>
<span><span class="co">## ── @srrstatsTODO standards (2 / 9): </span></span>
<span><span class="co">## </span></span>
<span><span class="co">##   * [RE4.4] on line#14 of file [R/srr-stats-standards.R]</span></span>
<span><span class="co">##   * [RE1.1] in function 'test_fn()' on line#11 of file [R/test.R]</span></span>
<span><span class="co">## </span></span>
<span><span class="co">## <span style="color: #00BB00;">────────────────────────────────────────────────────────────────────────────────</span></span></span>
<span><span class="co">## </span></span>
<span><span class="co">## Writing <span style="color: #0000BB;">package-package.Rd</span></span></span>
<span><span class="co">## Writing <span style="color: #0000BB;">test_fn.Rd</span></span></span>
<span><span class="co">## Writing <span style="color: #0000BB;">NAMESPACE</span></span></span></code></pre>
<p>The “roclets” contained within this package parse any instances of
the package-specified tags described below, and summarise the output by
listing all locations of each kind of tag. Locations are given as file
and line numbers, and where appropriate, the names of associated
functions. We recommend that developers familiarise themselves with the
system by simply modifying any <a href="https://roxygen2.r-lib.org" class="external-link"><code>roxygen2</code></a> block in any
of the files of this package skeleton, and running <a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link"><code>roxygenise()</code></a>
to see what happens.</p>
</div>
<div class="section level2">
<h2 id="enabling-srr-roclets-for-a-package">2. Enabling <code>srr</code> roclets for a package<a class="anchor" aria-label="anchor" href="#enabling-srr-roclets-for-a-package"></a>
</h2>
<p>The “roclets” can be enabled for a package by modifying the
<code>DESCRIPTION</code> file so that the <code>Roxygen</code> line
looks like this:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Roxygen</span><span class="op">:</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span> <span class="op">(</span>markdown <span class="op">=</span> <span class="cn">TRUE</span>, roclets <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span> <span class="op">(</span><span class="st">"namespace"</span>, <span class="st">"rd"</span>, <span class="st">"srr::srr_stats_roclet"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<p>That will load the <a href="https://roxygen2.r-lib.org" class="external-link">“roclets”</a>
used by this package to process standards as documented within your
actual code. Note that you do not need to add, import, or depend upon
the <code>srr</code> package anywhere else within the
<code>DESCRIPTION</code> file. See the <code>DESCRIPTION</code> file of
the package skeleton for an example.</p>
</div>
<div class="section level2">
<h2 id="roxygen2-tags">3. <code>roxygen2</code> tags<a class="anchor" aria-label="anchor" href="#roxygen2-tags"></a>
</h2>
<p>The <code>srr</code> packages recognises and uses the following three
tags, each of which may be inserted into <a href="https://roxygen2.r-lib.org" class="external-link"><code>roxygen2</code></a>
documentation blocks anywhere in your code. The tags are:</p>
<ol style="list-style-type: decimal">
<li>
<code>@srrstats</code> tags to indicate standards which have been
addressed. These should be placed at the locations within your code
where specific standards have been addressed, and should include a brief
textual description of how the code at that location addresses the
nominated standard.</li>
<li>
<code>@srrstatsTODO</code> tags to indicate standards which have not
yet been addressed. The <a href="https://docs.ropensci.org/srr/reference/srr_stats_roxygen.html"><code>srr_stats_roxygen()</code>
function</a> described below will place all standards for your nominated
categories in an initial file in the <code>/R</code> directory of your
project. Each of these will have a tag of <code>@srrstatsTODO</code>. As
you address each standard, you’ll need to move it from that initial
location to that point in your code where that standard is addressed,
and change the tag from <code>@srrstatsTODO</code> to
<code>@srrstats</code>. It may help to break the initial, commonly very
long, single list of standards into smaller groups, and to move each of
these into the approximate location within your code where these are
likely to be addressed. For example, all standards which pertain to
tests can be moved into the <code>/tests</code> (or
<code>/tests/testthat</code>) directory.</li>
<li>
<code>@srrstatsNA</code> tags to indicate standards which you deem
not applicable to your package. These need to be grouped together in a
single block with a title of <code>NA_standards</code>. Such a block is
both included in the package skeleton, and also in the output of <a href="https://docs.ropensci.org/srr/reference/srr_stats_roxygen.html"><code>srr_stats_roxygen()</code>
function</a>. The numbers of any non-applicable standards can then be
moved to this block, with a note explaining why these standards have
been deemed not to apply to your package.</li>
</ol>
<p>The output illustrated above shows how the <code>srr</code> package
groups these three tags together, first collecting the output of
standards which have been addressed (via <code>@srrstats</code> tags),
then showing output of non-applicable standards (via
<code>@srrstatsNA</code> tags), and finally standards which are still to
be addressed (via <code>@srrstatsTODO</code> tags).</p>
<div class="section level3">
<h3 id="format-of-srr-documentation">3.1 Format of <code>srr</code> documentation<a class="anchor" aria-label="anchor" href="#format-of-srr-documentation"></a>
</h3>
<p>The tags shown above from the skeleton package function
<code>test.R</code> indicates the expected format of standards within <a href="https://roxygen2.r-lib.org" class="external-link"><code>roxygen2</code></a>
documentation blocks. The package is designed to error on attempting to
run <a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link"><code>roxygenise()</code></a>
with any inappropriately formatted entries, and so should provide
informative messages to help rectify any problems. <code>srr</code>
documentation must adhere to the following formatting requirements:</p>
<ol style="list-style-type: decimal">
<li><p>The tags must appear immediately after the <a href="https://roxygen2.r-lib.org" class="external-link"><code>roxygen2</code></a>-style
comment symbols. This will almost always mean <code>#' @srrstats</code>
(but see details below, under <em>Locations of <code>srrstats</code>
documentation</em>).</p></li>
<li><p>The standards number(s) must be enclosed within curly braces,
such as <code>#' @srrstats {G1.0}</code>. Multiple standards may be
associated with a single tag by including them within the same single
pair of curly braces, and separating each by a comma, such as
<code>#' @srrstats {G1.0, G1.1}</code>.</p></li>
<li><p>Explanatory text may be placed anywhere before or after curly
braces enclosing standards, such that
<code>#' @srrstats some text {G1.0}</code> is entirely equivalent to
<code>#' @srrstats {G1.0} some text</code>.</p></li>
<li>
<p>Only the first pair of curly braces is parsed to determine
standards numbers; any subsequent curly braces within one expression
will be ignored. (Where an expression is everything that comes after one
<a href="https://roxygen2.r-lib.org" class="external-link"><code>roxygen2</code></a> tag, and
extends until the start of the next tag.) The following will accordingly
only refer to G1.0, and not G1.1:</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span>   <span class="co">#' @srrstats {G1.0} as well as {G1.1}.</span></span></code></pre></div>
<p>The appropriate way to refer to multiple tags is to include them in
the one set of curly braces, as shown above, or to use separate tags,
like this:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @srrstats {G1.0} as well as</span></span>
<span><span class="co">#' @srrstats {G1.1}</span></span></code></pre></div>
</li>
<li><p>Any standard may occur arbitrarily many times in any file(s)
within a package. The only requirement is that any one standard should
only be associated with one single kind of tag; thus should only be
<code>@srrstats</code> (a standard which has been addressed),
<em>or</em> <code>@srrstatsNA</code> (a standard which is not
applicable), <em>or</em> <code>@srrstatsTODO</code> (a standard which
has not yet been addressed).</p></li>
</ol>
<p>In almost all cases, all tags for a package will be generated by the
initial call to <a href="https://docs.ropensci.org/srr/reference/srr_stats_roxygen.html"><code>srr_stats_roxygen()</code></a>,
and should simply be moved to appropriate locations within a package’s
code without modifying the format.</p>
</div>
<div class="section level3">
<h3 id="locations-of-srrstats-documentation">3.2 Locations of <code>srrstats</code> documentation<a class="anchor" aria-label="anchor" href="#locations-of-srrstats-documentation"></a>
</h3>
<p><code>@srrstats</code> tags and accompanying text can be placed
almost anywhere within a package, especially in any file in the main
<code>/R</code>, <code>/tests</code>, or <code>src/</code> directories.
Within the <code>/R</code> directory, tags should be placed only in <a href="https://roxygen2.r-lib.org" class="external-link"><code>roxygen2</code></a> blocks.
These tags, and all associated text, will be ignored by the roclets used
by <a href="https://roxygen2.r-lib.org" class="external-link"><code>roxygen2</code></a> to
generate package documentation, and will only appear on screen output
like that shown above, and generated when running <a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link"><code>roxygenise()</code></a>.
If tags need to be inserted where there is no <a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link"><code>roxygen2</code></a>
block, then a new block will need to be created, the minimal requirement
for which is that it then have an additional <code>#' @noRd</code> tag
to suppress generation of documentation (<code>.Rd</code>) files. If
that block is associated with a function, the following two lines will
suffice:</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @srrstats G1.0 This standard belongs here</span></span>
<span><span class="co">#' @noRd</span></span>
<span><span class="va">myfunction</span> <span class="op">&lt;-</span> <span class="kw">function</span> <span class="op">(</span><span class="va">...</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="co"># ...</span></span>
<span><span class="op">}</span></span></code></pre></div>
<p>If that block is not associated with a function, the documentation
can be followed by a <code>NULL</code>, like this:</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' @srrstats G1.0 This standard belongs here</span></span>
<span><span class="co">#' @noRd</span></span>
<span><span class="cn">NULL</span></span></code></pre></div>
<p>Unlike <a href="https://roxygen2.r-lib.org" class="external-link"><code>roxygen2</code></a>, which only
processes blocks from within the main <code>R/</code> directory, the
<code>srr</code> package process blocks from within other directories
too. As these blocks will never be passed through to the main <a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link"><code>roxygenise()</code></a>
function, they need neither <code>#' @noRd</code> tags, nor
<code>NULL</code> definitions where none otherwise exist. An example is
in the <code>tests/</code> directory of the package skeleton:</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span> <span class="op">(</span><span class="va">d</span>, <span class="st">"tests"</span>, <span class="st">"testthat"</span>, <span class="st">"test-a.R"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] "#' @srrstats {RE2.2} is addressed here"</span></span>
<span><span class="co">## [2] "test_that(\"dummy test\", {"           </span></span>
<span><span class="co">## [3] "    expect_true (TRUE)"                </span></span>
<span><span class="co">## [4] "})"</span></span></code></pre>
<p>While <code>@srrstats</code> tags can also be placed in the
<code>src/</code> directory, the package currently only parses <a href="https://github.com/doxygen/doxygen" class="external-link"><code>doxygen</code></a>-style
blocks for code written in C or C++. (Note that <code>srr</code> is
currently further restricted to C++ code compiled with <a href="https://cran.r-project.org/package=Rcpp" class="external-link"><code>Rcpp</code></a>,
but will soon be adapted to work with other C++ interfaces such as <a href="https://cpp11.r-lib.org" class="external-link"><code>cpp11</code></a>.) These blocks are
converted by <a href="https://cran.r-project.org/package=Rcpp" class="external-link"><code>Rcpp</code></a>
into <a href="https://roxygen2.r-lib.org" class="external-link"><code>roxygen2</code></a>
blocks in a file called <code>R/RcppExports.R</code>, and so need to
include an additional <code>@noRd</code> tag to (optionally) suppress
generation of <code>.Rd</code> documentation. The skeleton package again
gives an example:</p>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span> <span class="op">(</span><span class="va">d</span>, <span class="st">"src"</span>, <span class="st">"cpptest.cpp"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "#include &lt;Rcpp.h&gt;"                    </span></span>
<span><span class="co">##  [2] ""                                     </span></span>
<span><span class="co">##  [3] "//' src_fn"                           </span></span>
<span><span class="co">##  [4] "//'"                                  </span></span>
<span><span class="co">##  [5] "//' A test C++ function"              </span></span>
<span><span class="co">##  [6] "//' @srrstats {G2.3} in src directory"</span></span>
<span><span class="co">##  [7] "//' @noRd"                            </span></span>
<span><span class="co">##  [8] "// [[Rcpp::export]]"                  </span></span>
<span><span class="co">##  [9] "int test () {"                        </span></span>
<span><span class="co">## [10] "    return 1L; }"</span></span></code></pre>
</div>
<div class="section level3">
<h3 id="documenting-standards-for-documentation">3.3 Documenting standards for documentation<a class="anchor" aria-label="anchor" href="#documenting-standards-for-documentation"></a>
</h3>
<p>Many standards refer to general package documentation, particularly
in a <code>README</code> document, or in package vignettes. All such
documents are presumed to be written in <code>.Rmd</code> format, for
which <code>@srrstats</code> tags must be included within distinct code
chunks. Again, the skeleton package has an example as follows:</p>
<div class="sourceCode" id="cb16"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/readLines.html" class="external-link">readLines</a></span> <span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span> <span class="op">(</span><span class="va">d</span>, <span class="st">"README.Rmd"</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##  [1] "# package"                                                                                </span></span>
<span><span class="co">##  [2] ""                                                                                         </span></span>
<span><span class="co">##  [3] "This is a skeleton of an [`srr` statistics](https://github.com/ropensci-review-tools/srr)"</span></span>
<span><span class="co">##  [4] "package, intended developers to tweak as they like, in order to understand "              </span></span>
<span><span class="co">##  [5] "how the package's roclets work."                                                          </span></span>
<span><span class="co">##  [6] ""                                                                                         </span></span>
<span><span class="co">##  [7] "This `README.Rmd` file is here to demonstrate how to embed `srr` roclet tags."            </span></span>
<span><span class="co">##  [8] "These tags need to be within dedicated *code chunks*, like the following:"                </span></span>
<span><span class="co">##  [9] ""                                                                                         </span></span>
<span><span class="co">## [10] "```{r srr-tags, eval = FALSE, echo = FALSE}"                                              </span></span>
<span><span class="co">## [11] "#' roxygen_block_name"                                                                    </span></span>
<span><span class="co">## [12] "#'"                                                                                       </span></span>
<span><span class="co">## [13] "#' (Add some text if you like)"                                                           </span></span>
<span><span class="co">## [14] "#'"                                                                                       </span></span>
<span><span class="co">## [15] "#' @srrstats {G1.4} Here is a reference to a standard"                                    </span></span>
<span><span class="co">## [16] "#' @srrstatsTODO {G1.5} And here is a reference to a standard yet to be addressed"        </span></span>
<span><span class="co">## [17] "```"                                                                                      </span></span>
<span><span class="co">## [18] ""                                                                                         </span></span>
<span><span class="co">## [19] "Note the chunk contains only [`roxygen2`](https://roxygen2.r-lib.org) lines,"             </span></span>
<span><span class="co">## [20] "and nothing else at all. Please change the `eval` and `echo` parameters to"               </span></span>
<span><span class="co">## [21] "see what happens when you knit the document."</span></span></code></pre>
<p>Those lines illustrate the expected form. <code>@srrstats</code> tags
should be within a single block contained within a dedicated code chunk.
<code>@srrstats</code> chunks within <code>.Rmd</code> files will
generally use <code>echo = FALSE</code> to prevent them appearing in the
rendered documents. The <a href="https://roxygen2.r-lib.org" class="external-link"><code>roxygen2</code></a> lines do not
need to be followed by a <code>NULL</code> (or any other non- <a href="https://roxygen2.r-lib.org" class="external-link"><code>roxygen2</code></a> statement),
although if additional R code is necessary for any reason, you may also
need to add <code>eval = FALSE</code>.</p>
</div>
<div class="section level3">
<h3 id="srrstatsna-tags-for-non-applicable-standards">3.4 <code>@srrstatsNA</code> tags for non-applicable standards<a class="anchor" aria-label="anchor" href="#srrstatsna-tags-for-non-applicable-standards"></a>
</h3>
<p>While <code>@srrstatsTODO</code> and <code>@srrstats</code> tags may
be placed anywhere within a package, <code>@srrstatsNA</code> tags used
to denote non-applicable standards must be placed within a dedicated <a href="https://roxygen2.r-lib.org" class="external-link"><code>roxygen2</code></a> block with a
title of <code>NA_standards</code>. As described above, both the package
skeleton and the file produced by calling <a href="https://docs.ropensci.org/srr/reference/srr_stats_roxygen.html"><code>srr_stats_roxygen()</code></a>
include templates for this block. The following illustrates a minimal
form:</p>
<div class="sourceCode" id="cb18"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#' NA_standards</span></span>
<span><span class="co">#'</span></span>
<span><span class="co">#' @srrstatsNA {S3.3} is not applicable</span></span>
<span><span class="co">#' @noRd</span></span>
<span><span class="cn">NULL</span></span></code></pre></div>
<p>An <code>NA_standards</code> block must end with <code>NULL</code>,
rather than be associated with a function definition. There can be
multiple <code>NA_standards</code> blocks in any location, enabling
these standards to be moved to approximate locations where they might
otherwise have been addressed. (For example, non-applicable standards
referring to tests might all be grouped together in a single
<code>NA_standards</code> block in the <code>tests/</code>
directory.)</p>
</div>
</div>
<div class="section level2">
<h2 id="the-srr-workflow">4. The <code>srr</code> workflow<a class="anchor" aria-label="anchor" href="#the-srr-workflow"></a>
</h2>
<p>The first step for any developer intending to use this package on the
way to a submission to rOpenSci’s project for peer-reviewing statistical
software is to generate the package skeleton described above, and to try
any and all conceivable ways to modify locations, formats, and other
properties of the <a href="https://roxygen2.r-lib.org" class="external-link"><code>roxygen2</code></a> tags defined
in this package, in order to understand how these tags are used to
generate the summary results when running <a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link"><code>roxygenise</code></a>.
Following that initial familiarisation, a typical workflow will involve
the following general steps:</p>
<ol style="list-style-type: decimal">
<li>Automatically download and insert lists of general and
category-specific standards in your package by running <a href="https://docs.ropensci.org/srr/reference/srr_stats_roxygen.html"><code>srr_stats_roxygen()</code></a>
(in the main package directory). This will by default generate a file in
the <code>R/</code> directory called <code>srr-stats-standards.R</code>,
although any alternative name can also be passed to the function (or the
file can be renamed after it has initially been created). Each group of
standards in this file must always be terminated by <code>NULL</code> in
order to be appropriately parsed by the <code>roxygen2</code>
package.</li>
<li>Change your package’s <code>DESCRIPTION</code> file to use the
<code>srr</code> roclets by adding
<code>roclets = "srr::srr_stats_roclet"</code>) to the
<code>Roxygen</code> line, as demonstrated at the outset, as well as in
the package skeleton.</li>
<li>Run <a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link"><code>roxygenise</code></a>
to confirm that the roclets work on your package. You should initially
see only a single list of <code>@srrstatsTODO</code> standards. All
documented standards should appear somewhere in the output. Any missing
standards indicate documentation problems, such as missing terminal
<code>NULL</code> values from standards blocks.</li>
<li>We recommend as a first step cutting-and-pasting standards to
approximate locations within your package’s code where you anticipate
these standards being addressed. Multiple copies of any one standard may
exist in multiple locations, so you may also repeat standards which you
anticipate will be addressed in multiple locations. This should reduce a
potentially very long initial list of standards down to several distinct
groups of hopefully more manageable size.</li>
<li>Begin addressing the standards by:
<ul>
<li>Ensuring your code conforms;</li>
<li>Moving each standard to the one or more location(s) where you think
your code most directly addresses them;</li>
<li>Modifying the <code>@srrstatsTODO</code> tag to
<code>@srrstats</code>
</li>
<li>Changing the initial text describing the standard itself to a brief
description of how your code addresses that standard.</li>
</ul>
</li>
<li>Standards which you deem not to be applicable to your package should
be grouped together in a single <a href="https://roxygen2.r-lib.org" class="external-link"><code>roxygen2</code></a> block with
the title <code>NA_standards</code> (as described above, and as
generated by the <a href="https://docs.ropensci.org/srr/reference/srr_stats_roxygen.html"><code>srr_stats_roxygen()</code></a>
function). This block must finish with a <code>NULL</code>
statement.</li>
<li>Update your documentation as frequently as you like or need, and use
the output of the roclets to inform and guide the process of converting
all <code>@srrstatsTODO</code> tags into either <code>@srrstats</code>
or <code>@srrstatsNA</code> tags.</li>
</ol>
<p>Note that we do <strong>not</strong> recommend copying files from the
package skeleton into your own package for you <code>srr</code>
documentation. The following lines demonstrate what happens if you
insert actual standards into the package skeleton:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/srr_stats_roxygen.html">srr_stats_roxygen</a></span> <span class="op">(</span>category <span class="op">=</span> <span class="st">"regression"</span>, <span class="co"># for example</span></span>
<span>                   filename <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span> <span class="op">(</span><span class="va">d</span>, <span class="st">"R"</span>, <span class="st">"srr-stats-standards.R"</span><span class="op">)</span>,</span>
<span>                   overwrite <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #00BB00;">✔</span> Downloaded general standards</span></span>
<span><span class="co">## <span style="color: #00BB00;">✔</span> Downloaded regression standards</span></span>
<span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Roxygen2-formatted standards written to [srr-stats-standards.R]</span></span></code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">roxygen2</span><span class="fu">::</span><span class="fu"><a href="https://roxygen2.r-lib.org/reference/roxygenize.html" class="external-link">roxygenise</a></span> <span class="op">(</span><span class="va">d</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## <span style="color: #00BBBB;">ℹ</span> Loading <span style="color: #0000BB;">package</span></span></span>
<span><span class="co">## Error: Standards [G1.1, G1.2, G1.3, G2.0, G2.1, G2.3] are listed with both @srrstats and @srrstatsTODO tags.</span></span>
<span><span class="co">## Please rectify to ensure these standards are only associated with one tag.</span></span></code></pre>
<p>To ensure all standards are first inserted with
<code>@srrstatsTODO</code> tags, and that there are no duplicates with
other tags, please use only the <a href="https://docs.ropensci.org/srr/reference/srr_stats_roxygen.html"><code>srr_stats_roxygen()</code></a>
function.</p>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><!-- begin footer --><div class="footer">
    <div class="container">
        <div class="row start top-4 bottom-8">
            <div class="col-2"> <img id="footerlogo" src="https://ropensci.org/img/icon_short_white.svg">
</div>
            <div class="col-10">
                <div class="row">
                    <div class="col-md-4 col-xs-6">
                        <a href="https://github.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-github"></div></a>
                        <a href="https://github.com/ropenscilabs" target="_blank" class="external-link"><div class="icon fa fa-flask"></div></a>
                        <a href="https://hachyderm.io/@ropensci" target="_blank" class="external-link"><div class="icon fab fa-mastodon"></div></a>
                        <a href="https://vimeo.com/ropensci" target="_blank" class="external-link"><div class="icon fab fa-vimeo"></div></a>
                    </div>
                </div>
                <div class="row top-4">
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">About</h5>
                            <li><a href="https://ropensci.org/about" class="external-link">About rOpenSci</a></li>
                            <li><a href="https://ropensci.org/software-review" class="external-link">Software Review</a></li>
                            <li><a href="https://ropensci.org/about#team" class="external-link">Our Team</a></li>
                            <li><a href="https://ropensci.org/careers" class="external-link">Jobs</a></li>
                            <li><a href="https://ropensci.org/donate" class="external-link">Donate</a></li>
                            <li><a href="https://ropensci.org/contact" class="external-link">Contact Us</a></li>
                        </ul>
</div>
                    <div class="col-md-3 col-sm-4">
                        <ul>
<h5 class="bottom-2">Community</h5>
                            <li><a href="https://ropensci.org/community/" class="external-link">Our Community</a></li>
                            <li><a href="https://ropensci.org/commcalls/" class="external-link">Community calls</a></li>
                            <li><a href="https://ropensci.org/events/" class="external-link">Events</a></li>
                            <li><a href="https://discuss.ropensci.org/" class="external-link">Join the Discussion</a></li>
                            <li><a href="https://ropensci.org/code-of-conduct" class="external-link">Code of conduct</a></li>
                        </ul>
</div>
                    <div class="col-md-2 col-sm-4">
                        <ul>
<h5 class="bottom-2">Resources</h5>
                            <li><a href="https://ropensci.org/packages/" class="external-link">Packages</a></li>
                            <li><a href="https://ropensci.org/usecases/" class="external-link">Use Cases</a></li>
                            <li><a href="https://ropensci.org/talks-papers/" class="external-link">Talks &amp; Publications</a></li>
                            <li><a href="https://docs.ropensci.org/" class="external-link">Documentation</a></li>
                            <li><a href="https://ropensci.org/news/" class="external-link">Newsletter</a></li>
                            <li><a href="https://ropensci.org/how-to-cite-ropensci/" class="external-link">Cite rOpenSci</a></li>
                        </ul>
</div>
                    <div class="col-md-4 col-xs-12">
                        <h5 class="bottom-2"></h5>

                        <p>rOpenSci is a fiscally sponsored project of <a href="http://numfocus.org" class="external-link">NumFOCUS</a>.</p>

                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<!-- / end footer -->


    </footer>
</div>





  </body>
</html>
